# Error Catalog for MSSUS Backend
# Format: <domain>.<category>.<name>
# Domain: auth, user, wallet, notification, system
# Category: validation, not-found, conflict, unauthorized, internal, operation
# HTTP Status derived from first digit: 4xx -> 400-level, 5xx -> 500-level

errors:
  # Authentication & Authorization Errors
  - id: auth.validation.missing-credential
    httpStatus: 400
    severity: WARN
    isRetryable: false
    messageTemplate: "Authentication credentials are required"
    domain: auth
    category: validation
    owner: auth-team
    remediation: "Provide valid credentials in the request"

  - id: auth.validation.invalid-credentials
    httpStatus: 401
    severity: WARN
    isRetryable: false
    messageTemplate: "Invalid username or password"
    domain: auth
    category: validation
    owner: auth-team
    remediation: "Check credentials and try again"

  - id: auth.unauthorized.token-expired
    httpStatus: 401
    severity: INFO
    isRetryable: true
    messageTemplate: "Authentication token has expired"
    domain: auth
    category: unauthorized
    owner: auth-team
    remediation: "Refresh your authentication token"

  - id: auth.unauthorized.token-invalid
    httpStatus: 401
    severity: WARN
    isRetryable: false
    messageTemplate: "Authentication token is invalid"
    domain: auth
    category: unauthorized
    owner: auth-team
    remediation: "Provide a valid authentication token"

  - id: auth.unauthorized.refresh-token-invalid
    httpStatus: 401
    severity: WARN
    isRetryable: false
    messageTemplate: "Refresh token is invalid"
    domain: auth
    category: unauthorized
    owner: auth-team
    remediation: "Login again to obtain a new refresh token"

  - id: auth.unauthorized.access-denied
    httpStatus: 403
    severity: WARN
    isRetryable: false
    messageTemplate: "You don't have permission to access this resource"
    domain: auth
    category: unauthorized
    owner: auth-team
    remediation: "Contact administrator for access permissions"

  - id: auth.unauthorized.account-pending
    httpStatus: 403
    severity: INFO
    isRetryable: false
    messageTemplate: "Account is pending approval"
    domain: auth
    category: unauthorized
    owner: auth-team
    remediation: "Wait for account approval"

  - id: auth.unauthorized.account-suspended
    httpStatus: 403
    severity: WARN
    isRetryable: false
    messageTemplate: "Account is suspended"
    domain: auth
    category: unauthorized
    owner: auth-team
    remediation: "Contact support for account status"

  - id: auth.unauthorized.email-verification-pending
    httpStatus: 403
    severity: WARN
    isRetryable: true
    messageTemplate: "Email verification is pending"
    domain: user
    category: validation
    owner: user-team
    remediation: "Retry OTP verification"


  # User Management Errors
  - id: user.not-found.by-id
    httpStatus: 404
    severity: INFO
    isRetryable: false
    messageTemplate: "User not found"
    domain: user
    category: not-found
    owner: user-team

  - id: user.not-found.by-email
    httpStatus: 404
    severity: INFO
    isRetryable: false
    messageTemplate: "User not found"
    domain: user
    category: not-found
    owner: user-team

  - id: user.conflict.email-exists
    httpStatus: 409
    severity: WARN
    isRetryable: false
    messageTemplate: "Email address already exists"
    domain: user
    category: conflict
    owner: user-team
    remediation: "Use a different email address or recover existing account"

  - id: user.conflict.username-exists
    httpStatus: 409
    severity: WARN
    isRetryable: false
    messageTemplate: "Username already exists"
    domain: user
    category: conflict
    owner: user-team
    remediation: "Choose a different username"

  - id: user.conflict.phone-exists
    httpStatus: 409
    severity: WARN
    isRetryable: false
    messageTemplate: "Phone already exists"
    domain: user
    category: conflict
    owner: user-team
    remediation: "Choose a different phone"

  - id: user.validation.invalid-email
    httpStatus: 400
    severity: WARN
    isRetryable: false
    messageTemplate: "Invalid email format"
    domain: user
    category: validation
    owner: user-team
    remediation: "Provide a valid email address"

  - id: user.validation.password-too-weak
    httpStatus: 400
    severity: WARN
    isRetryable: false
    messageTemplate: "Password does not meet security requirements"
    domain: user
    category: validation
    owner: user-team
    remediation: "Password must be at least 8 characters with mixed case, numbers, and symbols"

  - id: user.validation.profile-not-exists
    httpStatus: 400
    severity: WARN
    isRetryable: false
    messageTemplate: "User profile does not exist"
    domain: user
    category: validation
    owner: user-team
    remediation: "Check profile fields and try again"

  - id: user.validation.profile-not-active
    httpStatus: 400
    severity: WARN
    isRetryable: false
    messageTemplate: "User profile is not active"
    domain: user
    category: validation
    owner: user-team
    remediation: "Contact support to activate your profile"

  - id: otp.validation.invalid-otp
    httpStatus: 400
    severity: WARN
    isRetryable: true
    messageTemplate: "Invalid OTP code or expired"
    domain: otp
    category: validation
    owner: otp-team
    remediation: "Check the OTP code and try again"


  # Wallet Management Errors
  - id: wallet.not-found.by-user
    httpStatus: 404
    severity: INFO
    isRetryable: false
    messageTemplate: "Wallet not found for user"
    domain: wallet
    category: not-found
    owner: wallet-team

  - id: wallet.conflict.already-exists
    httpStatus: 409
    severity: WARN
    isRetryable: false
    messageTemplate: "Wallet already exists for this user"
    domain: wallet
    category: conflict
    owner: wallet-team

  - id: wallet.operation.insufficient-balance
    httpStatus: 400
    severity: WARN
    isRetryable: false
    messageTemplate: "Insufficient wallet balance for this operation"
    domain: wallet
    category: operation
    owner: wallet-team
    remediation: "Add funds to your wallet or reduce the transaction amount"

  - id: wallet.operation.inactive-wallet
    httpStatus: 400
    severity: WARN
    isRetryable: false
    messageTemplate: "Wallet is inactive and cannot be used"
    domain: wallet
    category: operation
    owner: wallet-team
    remediation: "Contact support to reactivate your wallet"

  - id: wallet.operation.failed
    httpStatus: 500
    severity: ERROR
    isRetryable: true
    messageTemplate: "Wallet operation failed"
    domain: wallet
    category: operation
    owner: wallet-team
    remediation: "Try again later or contact support if the issue persists"

  # Notification Errors
  - id: notification.operation.email-send-failed
    httpStatus: 500
    severity: ERROR
    isRetryable: true
    messageTemplate: "Failed to send email notification"
    domain: notification
    category: operation
    owner: notification-team

  - id: notification.operation.sms-send-failed
    httpStatus: 500
    severity: ERROR
    isRetryable: true
    messageTemplate: "Failed to send SMS notification"
    domain: notification
    category: operation
    owner: notification-team

  - id: notification.operation.template-not-found
    httpStatus: 500
    severity: ERROR
    isRetryable: false
    messageTemplate: "Email template not found"
    domain: notification
    category: operation
    owner: notification-team

  # Validation Errors
  - id: validation.request.invalid-body
    httpStatus: 400
    severity: WARN
    isRetryable: false
    messageTemplate: "Request body is invalid"
    domain: validation
    category: validation
    owner: platform-team

  - id: validation.request.missing-parameter
    httpStatus: 400
    severity: WARN
    isRetryable: false
    messageTemplate: "Required request parameter is missing"
    domain: validation
    category: validation
    owner: platform-team

  - id: validation.request.invalid-parameter-type
    httpStatus: 400
    severity: WARN
    isRetryable: false
    messageTemplate: "Request parameter has invalid type"
    domain: validation
    category: validation
    owner: platform-team

  - id: validation.file.size-exceeded
    httpStatus: 400
    severity: WARN
    isRetryable: false
    messageTemplate: "File size exceeds maximum limit"
    domain: validation
    category: validation
    owner: platform-team
    remediation: "Reduce file size and try again"

  # System Errors
  - id: system.internal.unexpected
    httpStatus: 500
    severity: ERROR
    isRetryable: false
    messageTemplate: "An unexpected error occurred"
    domain: system
    category: internal
    owner: platform-team

  - id: system.internal.database-error
    httpStatus: 500
    severity: ERROR
    isRetryable: true
    messageTemplate: "Database operation failed"
    domain: system
    category: internal
    owner: platform-team

  - id: system.internal.service-unavailable
    httpStatus: 503
    severity: ERROR
    isRetryable: true
    messageTemplate: "Service is temporarily unavailable"
    domain: system
    category: internal
    owner: platform-team
    remediation: "Please try again later"

  - id: system.not-found.resource
    httpStatus: 404
    severity: INFO
    isRetryable: false
    messageTemplate: "Requested resource not found"
    domain: system
    category: not-found
    owner: platform-team
    remediation: "Check the resource identifier and try again"

  - id: pricing-config.not-found.resource
    httpStatus: 404
    severity: INFO
    isRetryable: false
    messageTemplate: "No active pricing configuration found"
    domain: pricing-config
    category: not-found
    owner: pricing-team
    remediation: "Contact support to set up pricing configuration"

  # =========================================================================
  # Ride Module Errors (Ride Booking & Sharing)
  # =========================================================================
  
  # Ride Not Found Errors
  - id: ride.not-found.resource
    httpStatus: 404
    severity: INFO
    isRetryable: false
    messageTemplate: "Shared ride not found with ID: {rideId}"
    domain: ride
    category: not-found
    owner: ride-team
    remediation: "Verify the ride ID and try again"

  - id: ride.not-found.request
    httpStatus: 404
    severity: INFO
    isRetryable: false
    messageTemplate: "Ride request not found with ID: {requestId}"
    domain: ride
    category: not-found
    owner: ride-team
    remediation: "Verify the request ID and try again"

  # Ride Ownership & Authorization Errors
  - id: ride.unauthorized.not-owner
    httpStatus: 403
    severity: WARN
    isRetryable: false
    messageTemplate: "You are not the owner of this ride"
    domain: ride
    category: unauthorized
    owner: ride-team
    remediation: "Only the ride owner can perform this action"

  - id: ride.unauthorized.request-not-owner
    httpStatus: 403
    severity: WARN
    isRetryable: false
    messageTemplate: "You are not the owner of this ride request"
    domain: ride
    category: unauthorized
    owner: ride-team
    remediation: "Only the request owner can perform this action"

  - id: ride.unauthorized.invalid-profile
    httpStatus: 403
    severity: WARN
    isRetryable: false
    messageTemplate: "Your profile is not authorized to perform this action"
    domain: ride
    category: unauthorized
    owner: ride-team
    remediation: "Ensure your profile meets the requirements for this action"

  # Ride Validation Errors
  - id: ride.validation.no-seats-available
    httpStatus: 409
    severity: WARN
    isRetryable: false
    messageTemplate: "No seats available on this ride"
    domain: ride
    category: validation
    owner: ride-team
    remediation: "Choose a different ride or wait for another ride"

  - id: ride.validation.invalid-state
    httpStatus: 409
    severity: WARN
    isRetryable: false
    messageTemplate: "Ride is in invalid state for this operation: {currentState}"
    domain: ride
    category: validation
    owner: ride-team
    remediation: "This operation can only be performed on rides in specific states"

  - id: ride.validation.request-invalid-state
    httpStatus: 409
    severity: WARN
    isRetryable: false
    messageTemplate: "Request is in invalid state for this operation: {currentState}"
    domain: ride
    category: validation
    owner: ride-team
    remediation: "This operation can only be performed on requests in specific states"

  - id: ride.validation.invalid-location
    httpStatus: 400
    severity: WARN
    isRetryable: false
    messageTemplate: "Invalid location configuration: {reason}"
    domain: ride
    category: validation
    owner: ride-team
    remediation: "Check pickup and dropoff locations are valid and on route"

  - id: ride.validation.route-validation-failed
    httpStatus: 400
    severity: WARN
    isRetryable: false
    messageTemplate: "Route validation failed: {reason}"
    domain: ride
    category: validation
    owner: ride-team
    remediation: "Ensure the route is valid and reachable"

  - id: ride.validation.time-conflict
    httpStatus: 409
    severity: WARN
    isRetryable: false
    messageTemplate: "Time conflict: {reason}"
    domain: ride
    category: validation
    owner: ride-team
    remediation: "Adjust pickup or scheduled time to avoid conflicts"

  - id: ride.validation.service-area-violation
    httpStatus: 409
    severity: WARN
    isRetryable: false
    messageTemplate: "Service area violation: {reason}"
    domain: ride
    category: validation
    owner: ride-team
    remediation: "Ensure pickup and dropoff locations are within service areas"

  # Ride Operation Errors
  - id: ride.operation.wallet-hold-failed
    httpStatus: 402
    severity: WARN
    isRetryable: true
    messageTemplate: "Failed to place wallet hold: {reason}"
    domain: ride
    category: operation
    owner: ride-team
    remediation: "Ensure sufficient balance in wallet and retry"

  - id: ride.operation.matching-failed
    httpStatus: 500
    severity: ERROR
    isRetryable: true
    messageTemplate: "AI matching algorithm failed: {reason}"
    domain: ride
    category: operation
    owner: ride-team
    remediation: "Retry the matching request or contact support"

  - id: ride.operation.no-matches-found
    httpStatus: 404
    severity: INFO
    isRetryable: false
    messageTemplate: "No matching rides found for your request"
    domain: ride
    category: operation
    owner: ride-team
    remediation: "Try adjusting your pickup time or location"

  - id: ride.operation.request-expired
    httpStatus: 410
    severity: INFO
    isRetryable: false
    messageTemplate: "Ride request has expired (no driver accepted within timeout window)"
    domain: ride
    category: operation
    owner: ride-team
    remediation: "Create a new ride request"

  - id: ride.operation.cancellation-fee-required
    httpStatus: 402
    severity: WARN
    isRetryable: true
    messageTemplate: "Cancellation fee required: {feeAmount}"
    domain: ride
    category: operation
    owner: ride-team
    remediation: "Ensure sufficient balance to cover cancellation fee"